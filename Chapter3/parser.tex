\section{Main Parser, AST \& Nodes}
The parser turns the tokens into nodes and constructs AST's with them.
It was developed iteratively as other elements of the code where completed. XXX

\subsection{Simple Command}
A simple command is a line that contains a command with optional arguments and variable assignments.
The command can be a builtin (See~\ref{sec:builtins}), a function (See~\ref{sec:user-functions}) or an external command.

If the line with assignments also has an external command call, the assignments are temporary and are removed when the command completes.

During the third iteration this was created to support commands with arguments.
It was expanded during the fourth to accommodate variables assignments and during the fifth, for arguments that contained substitutions.
The simple command function is also the place that function definitions are detected and this was added during the penultimate iteration.

\subsection{Command}
Command is the function that parses the command structures of the code.
This includes the 'if', 'for', 'until', 'while' and 'case' expressions.

It also the place that command grouping occurs.
This feature is often seen when defining shell functions as some people may believe that, like other languages, it is a part of their definition syntax.
It is not however and can be used in many places to improve code structure.
A command group begins with a '\{' and ends with a corresponding '\}'.
Anything contained between the two is parsed as a separate group which allows it to be included
\subsection{Pipeline}
\subsection{And Or}
\subsection{List}

